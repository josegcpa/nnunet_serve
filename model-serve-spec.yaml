---
model_folder: /usr/backups/models/nnunet/
load_timeout_min: 60
models:
  - id: prostate_whole_gland_mri
    rel_path: prostate_whole_gland_model
    name: "Prostate whole gland segmentation"
    # file containing metadata for DICOM-seg output
    aliases: [prostate]
    metadata:
      path: metadata/whole-prostate.json
    # minimum amount of GPU memory to trigger running
    min_mem: 4000
    # defines default params (overriden by posts)
    default_args:
      series_folders: ["inputs/seriesT2"]
      use_folds: [0, 1, 2, 3, 4]
      tta: false
      checkpoint_name: "checkpoint_best.pth"
  - id: prostate_zone_mri
    rel_path: prostate_zone_model
    name: "Prostate zone segmentation model"
    aliases: [prostate_zones]
    metadata: 
      path: metadata/prostate-zones.json
    min_mem: 4000
    default_args:
      series_folders: ["inputs/seriesT2"]
      use_folds: [0, 1, 2, 3, 4]
      tta: false
      checkpoint_name: "checkpoint_best.pth"
  - id: prostate_aggressive_lesion_mri
    rel_path: prostate_aggressive_lesion_model
    name: "Prostate aggressive lesion detection model"
    aliases: [aggressive_lesion]
    metadata:
      path: metadata/prostate-aggressive-lesion.json
    min_mem: 4000
    default_args:
      series_folders:
        ["inputs/seriesT2", "inputs/seriesDWI", "inputs/seriesADC"]
      use_folds: [0, 1, 2, 3, 4]
      proba_threshold: 0.1
      min_confidence: 0.5
      tta: true
      save_proba_map: true
      checkpoint_name: "checkpoint_best.pth"
      class_idx: 1 # required to save probability maps
  - id: whole_body_ct
    rel_path: Dataset300_body_6mm_1559subj
    name: "Whole body CT segmentation model (from TotalSegmentator)"
    aliases: [body_ct]
    metadata:
      algorithm_name: "TotalSegmentator"
      algorithm_version: "v1.0"
      manufacturer: "TotalSegmentator"
      manufacturer_model_name: "TotalSegmentator"
      series_description: "Whole body CT segmentation model (from TotalSegmentator)"
      body_part_examined: "BODY"
      segment_names: ["EntireBody"]
    min_mem: 4000
    default_args:
      series_folders: ["inputs/seriesCT"]
      use_folds: [0]
      checkpoint_name: "checkpoint_final.pth"
      class_idx: 1
      proba_threshold: null
  - id: verbose_organ_ct
    rel_path: Dataset291_TotalSegmentator_part1_organs_1559subj
    name: "Organ CT segmentation model (from TotalSegmentator)"
    is_totalseg: true
    metadata:
      algorithm_name: "TotalSegmentator"
      algorithm_version: "v1.0"
      manufacturer: "TotalSegmentator"
      manufacturer_model_name: "TotalSegmentator"
      series_description: "Organ CT segmentation model (from TotalSegmentator)"
      body_part_examined: "BODY"
      segment_names: 
      - "Spleen"
      - "Right Kidney"
      - "Left Kidney"
      - "Gallbladder"
      - "Liver"
      - "Stomach"
      - "Pancreas"
      - "Right Adrenal Gland"
      - "Left AdrenalGland"
      - "Left UpperLobeOfLung"
      - "Left LowerLobeOfLung"
      - "Right UpperLobeOfLung"
      - "Right LobeOfLung"
      - "Right LowerLobeOfLung"
      - "Esophagus"
      - "Trachea"
      - "Thyroid"
      - "SmallIntestine"
      - "Duodenum"
      - "Colon"
      - "Bladder"
      - "Prostate"
      - name: "Cyst"
        label: "Left KidneyCyst"
        code: "367643001"
      - name: "Cyst"
        label: "Right KidneyCyst"
        code: "367643001"
    min_mem: 4000
    default_args:
      series_folders: ["inputs/seriesCT"]
      use_folds: [0]
      checkpoint_name: "checkpoint_final.pth"
      proba_threshold: null
  - id: total_fast_ct
    totalseg_task: "total_fast"
  - id: organ_ct
    totalseg_task: "organ_ct"
  - id: hepatic_couinaud_segments_ct
    totalseg_task: "liver_segments"
  - id: hcc_arterial_ct
    rel_path: hcc_arterial
    name: "HCC arterial phase segmentation model"
    metadata:
      algorithm_name: "nnUNet"
      algorithm_version: "v1.0"
      manufacturer: "CCIG"
      manufacturer_model_name: "CCIG"
      series_description: "HCC segmentation"
      body_part_examined: "BODY"
      segment_names: ["Neoplasm"]
    tta: false
    min_mem: 4000
    default_args:
      series_folders: ["inputs/seriesCT"]
      use_folds: [0, 1, 2, 3, 4]
      checkpoint_name: "checkpoint_final.pth"
    